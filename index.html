<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chef's Roulette - The Hungry Typewriter</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="crt-overlay"></div>
    <div class="paper-texture"></div>
    
    <div class="container">
        <!-- Header -->
        <header class="header">
            <!-- AI Settings Button -->
            <button class="ai-settings-btn" id="ai-settings-btn" title="AI Settings">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                </svg>
            </button>
            
            <!-- Mobile title (shows on small screens) -->
            <h1 class="mobile-title">CHEF'S ROULETTE</h1>
            
            <!-- ASCII title (shows on larger screens) -->
            <pre class="ascii-title">
╔═══════════════════════════════════════════════════════════════════════════════╗
║                                                                               ║
║      ██████╗██╗  ██╗███████╗███████╗ ██╗███████╗                              ║
║     ██╔════╝██║  ██║██╔════╝██╔════╝ ╚═╝██╔════╝                              ║
║     ██║     ███████║█████╗  █████╗      ███████╗                              ║
║     ██║     ██╔══██║██╔══╝  ██╔══╝      ╚════██║                              ║
║     ╚██████╗██║  ██║███████╗██║         ███████║                              ║
║      ╚═════╝╚═╝  ╚═╝╚══════╝╚═╝         ╚══════╝                              ║
║                                                                               ║
║      ██████╗  ██████╗ ██╗   ██╗██╗     ███████╗████████╗████████╗███████╗     ║
║      ██╔══██╗██╔═══██╗██║   ██║██║     ██╔════╝╚══██╔══╝╚══██╔══╝██╔════╝     ║
║      ██████╔╝██║   ██║██║   ██║██║     █████╗     ██║      ██║   █████╗       ║
║      ██╔══██╗██║   ██║██║   ██║██║     ██╔══╝     ██║      ██║   ██╔══╝       ║
║      ██║  ██║╚██████╔╝╚██████╔╝███████╗███████╗   ██║      ██║   ███████╗     ║
║      ╚═╝  ╚═╝ ╚═════╝  ╚═════╝ ╚══════╝╚══════╝   ╚═╝      ╚═╝   ╚══════╝     ║
║                                                                               ║
╚═══════════════════════════════════════════════════════════════════════════════╝
            </pre>
            <p class="tagline" id="tagline"></p>
        </header>

        <!-- The Oracle Section -->
        <section class="oracle-section">
            <div class="oracle-border">
                <div class="oracle-controls">
                    <div class="filter-group">
                        <label for="tag-filter">Filter by tag:</label>
                        <select id="tag-filter" class="typewriter-select">
                            <option value="">All menus</option>
                        </select>
                    </div>
                    
                    <button class="spin-button" id="spin-button">SPIN THE WHEEL</button>
                    
                    <button class="veto-button hidden" id="veto-button">
                        ✗ VETO & RE-ROLL
                    </button>
                </div>
                
                <div class="oracle-display hidden" id="oracle-display"></div>
            </div>
        </section>

        <!-- Menu Registry Section -->
        <section class="registry-section">
            <h2 class="section-title">═══ MENU REGISTRY ═══</h2>
            
            <div class="registry-controls">
                <button class="action-button" id="add-menu-btn">
                    [+] ADD NEW MENU
                </button>
                <div class="search-group">
                    <input type="text" id="search-input" class="typewriter-input" placeholder="Search menus...">
                </div>
                <button class="action-button" id="share-btn">
                    [↑] SHARE
                </button>
                <button class="action-button" id="import-btn">
                    [↓] IMPORT
                </button>
            </div>

            <div class="menu-list" id="menu-list">
                <div class="empty-state" id="empty-state">
                    <pre>
    ┌─────────────────────────────────────┐
    │                                     │
    │   The pantry echoes with            │
    │   emptiness...                      │
    │                                     │
    │   Add your first menu to begin!     │
    │                                     │
    └─────────────────────────────────────┘
                    </pre>
                </div>
            </div>
        </section>

        <!-- Add/Edit Menu Modal -->
        <div class="modal hidden" id="menu-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modal-title">═══ NEW MENU ENTRY ═══</h3>
                    <button class="close-button" id="close-modal">[X]</button>
                </div>
                
                <!-- AI Suggest Button -->
                <button type="button" class="ai-suggest-btn" id="ai-suggest-btn">
                    <span class="ai-icon">✨</span> LET THE AI SUGGEST A MENU
                </button>
                
                <!-- Import from URL -->
                <div class="url-import-section" id="url-import-section">
                    <label for="recipe-url">IMPORT FROM FOOBY.CH</label>
                    <div class="url-import-row">
                        <input type="text" id="recipe-url" class="typewriter-input" 
                               placeholder="Paste fooby.ch recipe URL...">
                        <button type="button" class="action-button" id="fetch-recipe-btn">[FETCH]</button>
                    </div>
                    <div class="url-import-status hidden" id="url-import-status"></div>
                </div>
                
                <form id="menu-form">
                    <input type="hidden" id="menu-id">
                    
                    <div class="form-group">
                        <label for="menu-name">DISH NAME *</label>
                        <input type="text" id="menu-name" class="typewriter-input" required 
                               placeholder="e.g., Spaghetti Carbonara">
                    </div>
                    
                    <div class="form-group">
                        <label for="menu-tags">TAGS (comma separated)</label>
                        <input type="text" id="menu-tags" class="typewriter-input" 
                               placeholder="e.g., italian, pasta, quick">
                    </div>
                    
                    <div class="form-group">
                        <label for="menu-notes">NOTES / RECIPE LINK</label>
                        <textarea id="menu-notes" class="typewriter-input" rows="3"
                                  placeholder="e.g., Use guanciale, not bacon!"></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="cancel-button" id="cancel-btn">[CANCEL]</button>
                        <button type="submit" class="submit-button">[SAVE ENTRY]</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Share Modal -->
        <div class="modal hidden" id="share-modal">
            <div class="modal-content share-modal-content">
                <div class="modal-header">
                    <h3>═══ SHARE MENUS ═══</h3>
                    <button class="close-button" id="close-share-modal">[X]</button>
                </div>
                
                <div class="share-preview" id="share-preview"></div>
                
                <div class="share-actions">
                    <button type="button" class="share-option-btn" id="copy-clipboard-btn">
                        <span class="share-icon">📋</span>
                        COPY TO CLIPBOARD
                    </button>
                    <button type="button" class="share-option-btn" id="share-whatsapp-btn">
                        <span class="share-icon">💬</span>
                        SHARE VIA WHATSAPP
                    </button>
                </div>
                
                <div class="share-status hidden" id="share-status"></div>
                
                <div class="share-note">
                    Clipboard contains JSON data for import. WhatsApp shows a readable list.
                </div>
            </div>
        </div>

        <!-- Import Modal -->
        <div class="modal hidden" id="import-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>═══ IMPORT MENUS ═══</h3>
                    <button class="close-button" id="close-import-modal">[X]</button>
                </div>
                
                <div class="import-instructions">
                    Paste the shared menu list below:
                </div>
                
                <textarea id="import-text" class="typewriter-input import-textarea" rows="8"
                          placeholder="Paste shared menus here..."></textarea>
                
                <div class="import-options">
                    <div class="import-option">
                        <input type="radio" id="import-merge" name="import-mode" value="merge" checked>
                        <label for="import-merge">Merge (skip duplicates)</label>
                    </div>
                    <div class="import-option">
                        <input type="radio" id="import-update" name="import-mode" value="update">
                        <label for="import-update">Merge (update existing)</label>
                    </div>
                    <div class="import-option">
                        <input type="radio" id="import-replace" name="import-mode" value="replace">
                        <label for="import-replace">Replace all menus</label>
                    </div>
                </div>
                
                <div class="import-preview hidden" id="import-preview">
                    <div class="import-preview-title">Preview:</div>
                    <div class="import-preview-list" id="import-preview-list"></div>
                </div>
                
                <div class="form-actions">
                    <button type="button" class="cancel-button" id="cancel-import-btn">[CANCEL]</button>
                    <button type="button" class="submit-button" id="confirm-import-btn">[IMPORT]</button>
                </div>
            </div>
        </div>

        <!-- AI Settings Modal -->
        <div class="modal hidden" id="ai-settings-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>═══ AI SETTINGS ═══</h3>
                    <button class="close-button" id="close-ai-settings-modal">[X]</button>
                </div>
                
                <div class="ai-settings-info">
                    Configure your Azure OpenAI connection to enable AI-powered menu suggestions.
                </div>
                
                <form id="ai-settings-form">
                    <div class="form-group">
                        <label for="ai-api-url">API URL *</label>
                        <input type="text" id="ai-api-url" class="typewriter-input" required 
                               placeholder="https://your-resource.cognitiveservices.azure.com/openai/responses?api-version=...">
                    </div>
                    
                    <div class="form-group">
                        <label for="ai-api-key">API KEY *</label>
                        <input type="password" id="ai-api-key" class="typewriter-input" required 
                               placeholder="Your Azure OpenAI API key">
                    </div>
                    
                    <div class="form-group">
                        <label for="ai-model-name">MODEL NAME *</label>
                        <input type="text" id="ai-model-name" class="typewriter-input" required 
                               placeholder="e.g., gpt-4o, gpt-4o-mini">
                    </div>
                    
                    <div class="ai-settings-status" id="ai-settings-status"></div>
                    
                    <div class="form-actions">
                        <button type="button" class="cancel-button" id="cancel-ai-settings-btn">[CANCEL]</button>
                        <button type="submit" class="submit-button">[SAVE SETTINGS]</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- AI Suggestions Modal -->
        <div class="modal hidden" id="ai-suggestions-modal">
            <div class="modal-content ai-suggestions-content">
                <div class="modal-header">
                    <h3>═══ AI SUGGESTIONS ═══</h3>
                    <button class="close-button" id="close-ai-suggestions-modal">[X]</button>
                </div>
                
                <!-- Loading State -->
                <div class="ai-loading" id="ai-loading">
                    <div class="ai-spinner"></div>
                    <p>The AI chef is cooking up suggestions...</p>
                </div>
                
                <!-- Error State -->
                <div class="ai-error hidden" id="ai-error">
                    <p class="ai-error-message" id="ai-error-message"></p>
                    <button type="button" class="action-button" id="ai-retry-btn">[RETRY]</button>
                </div>
                
                <!-- Suggestions List -->
                <div class="ai-suggestions-list hidden" id="ai-suggestions-list"></div>
            </div>
        </div>

        <!-- Notes Viewer Modal -->
        <div class="modal hidden" id="notes-modal">
            <div class="modal-content notes-modal-content">
                <div class="modal-header">
                    <h3 id="notes-modal-title">═══ RECIPE NOTES ═══</h3>
                    <button class="close-button" id="close-notes-modal">[X]</button>
                </div>
                <div class="notes-modal-body" id="notes-modal-body"></div>
            </div>
        </div>

        <!-- History Section -->
        <section class="history-section">
            <h2 class="section-title">═══ RECENT PROPHECIES =══</h2>
            <div class="history-list" id="history-list">
                <div class="history-empty">No prophecies yet...</div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <span>══════════════════════════════════════════════════</span>
                <p>CHEF'S ROULETTE v1.0 | Data stored locally in your browser</p>
                <span>══════════════════════════════════════════════════</span>
            </div>
        </footer>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/typewriter.js"></script>
    <script src="js/roulette.js"></script>
    <script src="js/ai.js"></script>
    <script src="js/scraper.js"></script>
    <script src="js/app.js"></script>
</body>
</html>

